{% extends "chat/index.html" %}
{% block form %}
<h3>Register</h3>
<form id="register-form" class="form-group">
    <div class="row">
        <div class="input-field col s12">
            <input type="text" id="id_username" name="username"  class="validate invalid">
            <label for="id_username" data-error="Username already taken">Username</label>
        </div>
    </div>
    <div class="row">
        <div class="input-field col s12">
            <input type="password" id="id_password1" name="password1">
            <label for="id_password1">Password</label>
        </div>
    </div>
    <div class="row">
        <div class="input-field col s12">
            <input type="password" id="id_password2" name="password2">
            <label for="id_password2">Enter Password Again</label>
        </div>
    </div>
    <div class="row">
        <div class="col s12">
            <div class="right">
                <button class="btn blue waves-effect waves-light pull-s2" type="submit">Register</button>
            </div>    
        </div>
    </div> 
</form>


<script>
    $(function () {
        $('#register-form').on('submit', function (event) {
            event.preventDefault(); //Prevent the default behavior on submit.
            var username = $('#id_username').val();
            var password;
            if(username !== '') //Check if username in not blank
            {
                password = $('#id_password').val();
                if(password !== '' && password === $('#id_password2').val()) //Check if password is not blank and matches with the confirmation.
                {
                    register(username, password); //Calling register function, which we will define in 'chat.js'
                }
                else{
                    alert("The passwords doesn't match!");
                }
            }
            else
                alert("Please enter a valid username!");
        })
    })
</script>
    
{% endblock form %}